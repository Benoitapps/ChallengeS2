<script setup>
import { onMounted } from 'vue'

onMounted(() => {
  document.querySelectorAll(".navbar__links").forEach(link => {
    if(link.querySelector("a").href === window.location.href) {
      link.classList.add("selected");
    }

    link.addEventListener("click", () => {
      if(document.querySelector(".selected")) {
        document.querySelector(".selected").classList.remove("selected");
      }

      link.classList.add("selected");
    });
  });
});
</script>

<template>
  <header>
    <nav>
      <ul class="navbar">
        <li class="navbar__links">
          <router-link to="/">
            <svg xmlns="http://www.w3.org/2000/svg" height="48" viewBox="0 -960 960 960" width="48">
              <path d="M280.082-424.309q-23.082 0-39.428-16.264-16.345-16.264-16.345-39.345 0-23.082 16.264-39.428 16.264-16.345 39.345-16.345 23.082 0 39.428 16.264 16.345 16.264 16.345 39.345 0 23.082-16.264 39.428-16.264 16.345-39.345 16.345ZM280-260.001q-91.538 0-155.768-64.231-64.23-64.23-64.23-155.768t64.23-155.768q64.23-64.231 155.768-64.231 67.769 0 119.653 34 51.885 34 78.173 98.385h363.02l94.921 94.921-144.306 133.384-79.922-58.615-82.23 59.384-70.769-53.846h-80.618q-22.307 57.692-73.692 95.038-51.384 37.347-124.23 37.347Zm0-45.384q58.769 0 105.654-38.115 46.884-38.116 60.04-94.269h129.461l54.769 42.692 82.615-58.769 75.846 57.384 81.922-77.846-47.922-47.923H445.769q-11.615-53.307-57.809-92.846-46.194-39.538-107.86-39.538-72.792 0-123.754 50.9-50.961 50.9-50.961 123.654 0 72.753 50.918 123.715Q207.221-305.385 280-305.385Z"/>
            </svg>
            KPI
          </router-link>
        </li>
        <li class="navbar__links">
          <router-link to="/charts">
            <svg xmlns="http://www.w3.org/2000/svg" height="48" viewBox="0 -960 960 960" width="48">
              <path d="M130.001-130.001v-62.922l45.383-45.383v108.305h-45.383Zm163.846 0v-222.922l45.383-45.383v268.305h-45.383Zm163.461 0v-268.305l45.384 46.383v221.922h-45.384Zm163.846 0v-221.922l45.384-45.383v267.305h-45.384Zm163.462 0v-382.922l45.383-45.383v428.305h-45.383ZM130.001-372.54v-63.844L400-705.153l160 160 269.999-270.614v64.229L560-480.924l-160-160L130.001-372.54Z"/>
            </svg>
            Graphiques
          </router-link>
        </li>
        <li class="navbar__links">
          <router-link to="/heatmap">
            <svg xmlns="http://www.w3.org/2000/svg" height="48" viewBox="0 -960 960 960" width="48">
              <path d="M462.23-260.771q-85.614-7.308-143.921-69.769-58.308-62.461-58.308-149.46 0-92.051 63.974-156.025Q387.949-699.999 480-699.999q86.999 0 149.46 58.115 62.461 58.115 69.769 144.345l-48.383-15q-11.353-61.307-58.708-101.692Q544.782-654.615 480-654.615q-72.692 0-123.654 50.961Q305.385-552.692 305.385-480q0 64.307 40.577 112.077 40.577 47.769 101.499 59.153l14.769 47.999Zm48 159.154q-7.557 1-15.115 1.308-7.557.308-15.115.308-78.85 0-148.199-29.92-69.35-29.92-120.65-81.21-51.3-51.291-81.225-120.629-29.925-69.337-29.925-148.173t29.92-148.204q29.92-69.369 81.21-120.682 51.291-51.314 120.629-81.247 69.337-29.933 148.173-29.933t148.204 29.925q69.369 29.925 120.682 81.225 51.314 51.3 81.247 120.65Q859.999-558.85 859.999-480q0 7.461-.308 14.923-.308 7.461-1.308 14.923l-43.768-13.385V-480q0-139.692-97.461-237.154Q619.692-814.615 480-814.615t-237.154 97.461Q145.385-619.692 145.385-480t97.461 237.154Q340.308-145.385 480-145.385h16.461l13.769 43.768Zm295.384 7.384-181.385-181.77-43.461 131.383L480-480l335.38 100.768-131.383 43.461 181.77 181.385-60.153 60.153Z"/>
            </svg>
            Heatmap
          </router-link>
        </li>
        <li class="navbar__links">
          <router-link to="/settings">
            <svg xmlns="http://www.w3.org/2000/svg" height="48" viewBox="0 -960 960 960" width="48">
              <path d="m400.693-100.001-18.077-120.231q-20.538-7-44.231-20.346-23.692-13.346-40.846-28.27l-111.846 50.923-79.922-141.306 101.077-74.384q-2-10.539-2.885-23-.885-12.462-.885-23 0-10.154.885-22.616t2.885-24.154l-101.077-74.769 79.922-140.152 111.461 50.154q18.308-14.924 41.231-28.078 22.924-13.154 43.847-19.538l18.461-121.231h158.614l18.077 120.615q22.077 8.154 44.154 20.231 22.077 12.077 39.769 28.001l113.384-50.154 79.538 140.152-102.615 74.308q2.769 11.923 3.462 24 .692 12.077.692 22.846 0 10.385-.885 22.154-.884 11.769-3.269 24.462l102.23 74.153-79.922 141.306-112.615-51.307q-18.692 15.692-40.346 28.962-21.654 13.269-43.577 19.654l-18.077 120.615H400.693Zm78.153-267.308q47.076 0 79.884-32.807 32.807-32.808 32.807-79.884t-32.807-79.884q-32.808-32.807-79.884-32.807-46.692 0-79.691 32.807-33 32.808-33 79.884t33 79.884q32.999 32.807 79.691 32.807Zm0-45.384q-27.846 0-47.577-19.73-19.73-19.731-19.73-47.577 0-27.846 19.73-47.577 19.731-19.73 47.577-19.73 28.231 0 47.769 19.73 19.539 19.731 19.539 47.577 0 27.846-19.539 47.577-19.538 19.73-47.769 19.73ZM480-480Zm-42.846 334.615h85.307L536.846-257q31.846-8 59.423-23.846 27.577-15.847 52.731-40.231l104.461 45.231 40-70.847L701-414.923q4-17.77 6.307-33.5 2.308-15.731 2.308-31.577 0-16.615-2-31.961T701-544.307l93.23-69-40-70.847-105.615 45.231q-21.077-23.692-50.846-41.769Q568-698.769 536.461-703l-13.615-111.615h-85.692l-13.231 111.231q-33.23 6.615-61.192 22.653-27.961 16.039-52.115 41.424L205.77-684.154l-40 70.847 92.461 67.846q-4.385 15.846-6.692 32.153-2.308 16.308-2.308 33.693 0 16.615 2.308 32.538 2.307 15.923 6.307 32.154l-92.076 68.23 40 70.847 104.461-44.847q24 24.385 52.154 40.231 28.154 15.846 61.154 23.846l13.615 111.231Z"/>
            </svg>
            Param√®tres
          </router-link>
        </li>
      </ul>
    </nav>
  </header>
</template>

<style scoped lang="scss">
  header,
  nav {
    display: flex;
    height: 100%;
    width: 200px;
  }

  header {
    position: fixed;
    top: 0;
    left: 0;
    border-right: var(--border);
    padding: 20px 0;
    background: var(--background);
    height: 100vh;

    .navbar {
      display: flex;
      flex-direction: column;
      gap: 15px;
      width: 100%;
      height: 100%;
      position: relative;

      &__links {
        display: flex;
        align-items: center;
        width: 100%;
        height: 50px;
        border-radius: 0 50px 50px 0;
        overflow: hidden;

        &:last-child {
          position: absolute;
          bottom: 0;
          left: 0;
        }

        a {
          display: flex;
          align-items: center;
          gap: 6px;
          width: 100%;
          height: 100%;
          font-weight: 500;
          padding-left: 20px;

          &:hover {
            background-color: var(--accent);
          }

          svg {
            height: 30px;

            path {
              fill: var(--text-color);
            }
          }
        }

        &.selected {
          background-color: var(--primary);

          a {
            &:hover {
              background-color: var(--primary) !important;
            }
          }
        }
      }
    }
  }
</style>